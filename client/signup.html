<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Simple Signup Experimentation</title>
</head>
<!-- Very simple HTML at the moment -->
<body>
	<div id="wrap">
		<div class="container">
			<div id="spacer"></div>
			<div class="row">
				<div class="span4 offset4">
					{{> header}}
				</div>
			</div>
		</div>
	</div>
		
	<div id="footer">
		<div class="container">
			<p class="muted credit">I am on github <a href="https://github.com/schofld">https://github.com/schofld</a> and this experiment is on <a href="https://github.com/schofld/signup">https://github.com/schofld/signup</a> Follow me and contribute... It's just about learning :)</p>
		</div>
	</div>
</body>

<template name="header">
	{{#if currentUser}}
		<h1 class="text-center">Your Profile</h1>
	{{else}}
		{{#if signup}}
			<h1 class="text-center">Sign Up</h1>
		{{else}}
			<h1 class="text-center">Sign In</h1>
		{{/if}}
	{{/if}}
	<hr>
	{{#if currentUser}}
		{{> user_loggedin}}
	{{else}}
		{{> user_loggedout}}
	{{/if}}
</template>

<!-- the Handlebars 'partial' that gets looped to show the user data -->
<template name="profileData">
	<h2>{{username}}</h2>
	{{#if editMode}}
		<div class="controls">
			<input class="span4" id="favcolor" type="text" value="{{profile.favcolor}}">
			<input class="span4" id="location" type="text" value="{{profile.location}}">
			<input class="span4" id="bio" type="text" value="{{profile.bio}}">
		</div>
	{{else}}
		<p><i class="icon-star"></i> My fav color is {{profile.favcolor}}</dd>
		<p><i class="icon-map-marker"></i> {{profile.location}}</p>
		<p><i class="icon-info-sign"></i> {{profile.bio}}</p>
	{{/if}}
</template>

<template name="user_loggedin">
	{{#if loggingIn}}
		<a>Logging in...</a>
	{{else}}
		<!-- the user data used to be shown this way
		<p>My fav color is <strong>{{currentUser.profile.favcolor}}</strong></p>
		<p>I am in <strong>{{currentUser.profile.location}}</strong></p>
		-->
		{{#each curuser}}
			{{> profileData}}
		{{/each}}

		{{#if editMode}}
			<button id="saveEdit" class="btn btn-success" type="submit">Save</button>
		{{else}}
			<button id="editProfile" class="btn btn-custom" type="submit"><i class="icon-pencil icon-white"></i> Edit Your Profile</button>
		{{/if}}
		
		<hr>
		<button id="logout" class="btn" type="submit">Log Out</button>
	{{/if}}
</template>

<template name="user_loggedout">
		{{#if signup}}
			<input class="span4" id="usernameup" type="text" placeholder="Choose a username">
			<input class="span4" id="passwordup" type="text" placeholder="Choose a password">
			<p>Share someting about yourself</p>
			<input class="span4" id="favcolor" type="text" placeholder="What is you Fav color?">
			<input class="span4" id="location" type="text" placeholder="Where are you?">
			</br>
			<button id="createUser" class="btn btn-success" type="submit">Create User</button>
		{{else}}
			<p>Login with your account</p>
			<input class="span4" id="username" type="text" placeholder="username">
			<input class="span4" id="password" type="password" placeholder="password">
			</br>
			<button id="login" class="btn btn-success" type="submit">Sign In</button>
			<hr>
			<p>New user? <a id="signup">Sign up now!</a></p>
		{{/if}}
</template>
